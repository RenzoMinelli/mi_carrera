<% content_for :navigation_icon do %>
  <%= link_to "arrow_back", root_path, :class => "material-icons mdc-top-app-bar__navigation-icon" %>
<% end %>

<div class="mdc-list-group">
  <h3 class="mdc-list-group__subheader mdc-typography--headline5"><%= @subject.name %></h3>
  <hr class="mdc-list-divider">

  <div class="mdc-list" data-controller="exam-visibility" >
    <label class="mdc-list-item" for="checkbox_course_approved">
      <span class="mdc-list-item__text">
        Curso aprobado?
      </span>

      <span class="mdc-list-item__meta">
        <%= form_with(model: @subject, url: approve_subject_path(@subject), data: { controller: "autosave-check", action: "ajax:success->exam-visibility#approvalChange" }) do |form| %>
          <div class="mdc-checkbox">
            <%= form.check_box :course_approved, { id: "checkbox_course_approved", class: "mdc-checkbox__native-control", checked: bedel.approved_course?(@subject), data: { action: "autosave-check#update" } }, "yes", "no" %>
            <div class="mdc-checkbox__background">
              <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
              </svg>

              <div class="mdc-checkbox__mixedmark"></div>
            </div>
          </div>
        <% end %>
      </span>
    </label>

    <label class="mdc-list-item <%= "exam-hidden" if !bedel.able_to_do?(@subject, true) %>" for="checkbox_exam_approved" data-target="exam-visibility.exam">
      <span class="mdc-list-item__text">
        Examen aprobado?
      </span>

      <span class="mdc-list-item__meta">
        <%= form_with(model: @subject, url: approve_subject_path(@subject), data: { controller: "autosave-check" }) do |form| %>
          <div class="mdc-checkbox">
            <%= form.check_box :exam_approved, { id: "checkbox_exam_approved", class: "mdc-checkbox__native-control", checked: bedel.approved_exam?(@subject), data: { action: "autosave-check#update" } }, "yes", "no" %>
            <div class="mdc-checkbox__background">
              <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
              </svg>

              <div class="mdc-checkbox__mixedmark"></div>
            </div>
          </div>
        <% end %>
      </span>
    </label>
  </div>
</div>
